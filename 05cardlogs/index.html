<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì¹´ë“œ ê²°ì œ ë‚´ì—­</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="../common/sidebar.css"/>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="cardlogs-main">
          <!-- ëª¨ë°”ì¼ ë„¤ë¹„ë°” -->
    <nav class="mobile-navbar d-md-none d-flex justify-content-between align-items-center px-3 py-2 bg-white shadow-sm fixed-top">
      <button id="mobile-menu-toggle" class="btn" aria-expanded="false">
        <img src="../assets/hamburger.png" alt="ë©”ë‰´" width="24">
      </button>
      <a href="../index.html" style="width: 120px; height: 40px; display: flex; align-items: center;">
        <img src="../assets/logo.png" alt="ë¡œê³ " style="height: 24px;">
      </a>
    </nav>
    <!-- ëª¨ë°”ì¼ìš© ì ‘íˆëŠ” ë©”ë‰´ ì˜ì—­ -->
    <div id="mobile-menu" class="mobile-menu d-md-none">
      <ul>
        <li class="list-category text-uppercase fw-bold text-muted small px-3 mt-4">
          <span class="list-category-text">MANAGE</span>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../02applylist/applylist.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-spreadsheet-icon lucide-file-spreadsheet"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M8 13h2"/><path d="M14 13h2"/><path d="M8 17h2"/><path d="M14 17h2"/></svg>
              </span>
              <span class="list-content-text">íŒŒí‹°ì‹ ì²­ì„œ</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../03reservationlist/reservationlist.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sheet-icon lucide-sheet"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="3" x2="21" y1="15" y2="15"/><line x1="9" x2="9" y1="9" y2="21"/><line x1="15" x2="15" y1="9" y2="21"/></svg>
              </span>
              <span class="list-content-text">ì˜ˆì•½ì‹œíŠ¸</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../05cardlogs/index.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-piggy-bank-icon lucide-piggy-bank"><path d="M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z"/><path d="M16 10h.01"/><path d="M2 8v1a2 2 0 0 0 2 2h1"/></svg>
              </span>
              <span class="list-content-text">ì¬ë¬´ê¸°ë¡</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../04calendar/calender.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calendar-days-icon lucide-calendar-days"><path d="M8 2v4"/><path d="M16 2v4"/><rect width="18" height="18" x="3" y="4" rx="2"/><path d="M3 10h18"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>
              </span>
              <span class="list-content-text">ìº˜ë¦°ë”</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../09party-cards-data/party_cards.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-terminal-icon lucide-square-terminal"><path d="m7 11 2-2-2-2"/><path d="M11 13h4"/><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>
              </span>
              <span class="list-content-text">íŒŒí‹°ì¹´ë“œ ë°ì´í„°</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../10accounts/accounts.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-key-round-icon lucide-key-round"><path d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"/><circle cx="16.5" cy="7.5" r=".5" fill="currentColor"/></svg>
              </span>
              <span class="list-content-text">ê²Œë¦´ë¼ ê³„ì •</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list-category text-uppercase fw-bold text-muted small px-3 mt-4">
          <span class="list-category-text">GAMES</span>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../07ppt/controller.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-app-window-icon lucide-app-window"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M10 4v4"/><path d="M2 8h20"/><path d="M6 4v4"/></svg>
              </span>
              <span class="list-content-text">ì§„í–‰ PPT</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../11stickgame/controller.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-candy-cane-icon lucide-candy-cane"><path d="M5.7 21a2 2 0 0 1-3.5-2l8.6-14a6 6 0 0 1 10.4 6 2 2 0 1 1-3.464-2 2 2 0 1 0-3.464-2Z"/><path d="M17.75 7 15 2.1"/><path d="M10.9 4.8 13 9"/><path d="m7.9 9.7 2 4.4"/><path d="M4.9 14.7 7 18.9"/></svg>
              </span>
              <span class="list-content-text">ë§‰ëŒ€ê²Œì„</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../06quizppt/index.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smile-icon lucide-smile"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" x2="9.01" y1="9" y2="9"/><line x1="15" x2="15.01" y1="9" y2="9"/></svg>
              </span>
              <span class="list-content-text">ì¸ë¬¼ê²Œì„</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
    <!-- ë°ìŠ¤í¬íƒ‘ ì‚¬ì´ë“œë°” -->
    <div class="sidebar d-none d-md-flex flex-column bg-white shadow">
      <div class="sidebar-head d-flex align-items-center border-bottom py-2">
        <button id="sidebar-toggle">
          <img class="hamburger-icon" src="../assets/hamburger.png">
        </button>
        <a href="../index.html" class="sidebar-head-logo">
          <img class="sidebar-head-loge-img" src="../assets/logo.png">
        </a>
      </div>
      <ul>
        <li class="list-category text-uppercase fw-bold text-muted small px-3 mt-4">
          <span class="list-category-text">MANAGE</span>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../02applylist/applylist.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-spreadsheet-icon lucide-file-spreadsheet"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M8 13h2"/><path d="M14 13h2"/><path d="M8 17h2"/><path d="M14 17h2"/></svg>
              </span>
              <span class="list-content-text">íŒŒí‹°ì‹ ì²­ì„œ</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../03reservationlist/reservationlist.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sheet-icon lucide-sheet"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><line x1="3" x2="21" y1="9" y2="9"/><line x1="3" x2="21" y1="15" y2="15"/><line x1="9" x2="9" y1="9" y2="21"/><line x1="15" x2="15" y1="9" y2="21"/></svg>
              </span>
              <span class="list-content-text">ì˜ˆì•½ì‹œíŠ¸</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../05cardlogs/index.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-piggy-bank-icon lucide-piggy-bank"><path d="M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z"/><path d="M16 10h.01"/><path d="M2 8v1a2 2 0 0 0 2 2h1"/></svg>
              </span>
              <span class="list-content-text">ì¬ë¬´ê¸°ë¡</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../13ga4/ga4.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-proportions-icon lucide-proportions"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="M12 9v11"/><path d="M2 9h13a2 2 0 0 1 2 2v9"/></svg>     
              </span>
              <span class="list-content-text">êµ¬ê¸€ ì• ë„ë¦¬í‹±ìŠ¤</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../09party-cards-data/party_cards.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-terminal-icon lucide-square-terminal"><path d="m7 11 2-2-2-2"/><path d="M11 13h4"/><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/></svg>
              </span>
              <span class="list-content-text">íŒŒí‹°ì¹´ë“œ ë°ì´í„°</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../10accounts/accounts.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-key-round-icon lucide-key-round"><path d="M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z"/><circle cx="16.5" cy="7.5" r=".5" fill="currentColor"/></svg>
              </span>
              <span class="list-content-text">ê²Œë¦´ë¼ ê³„ì •</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list-category text-uppercase fw-bold text-muted small px-3 mt-4">
          <span class="list-category-text">GAMES</span>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../07ppt/controller.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-app-window-icon lucide-app-window"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="M10 4v4"/><path d="M2 8h20"/><path d="M6 4v4"/></svg>
              </span>
              <span class="list-content-text">ì§„í–‰ PPT</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../11stickgame/controller.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-candy-cane-icon lucide-candy-cane"><path d="M5.7 21a2 2 0 0 1-3.5-2l8.6-14a6 6 0 0 1 10.4 6 2 2 0 1 1-3.464-2 2 2 0 1 0-3.464-2Z"/><path d="M17.75 7 15 2.1"/><path d="M10.9 4.8 13 9"/><path d="m7.9 9.7 2 4.4"/><path d="M4.9 14.7 7 18.9"/></svg>
              </span>
              <span class="list-content-text">ë§‰ëŒ€ê²Œì„</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../06quizppt/index.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-smile-icon lucide-smile"><circle cx="12" cy="12" r="10"/><path d="M8 14s1.5 2 4 2 4-2 4-2"/><line x1="9" x2="9.01" y1="9" y2="9"/><line x1="15" x2="15.01" y1="9" y2="9"/></svg>
              </span>
              <span class="list-content-text">ì¸ë¬¼ê²Œì„</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
        <li class="list nav-item pt-2 pb-2">
          <a href="../12finball/index.html" class="list-content nav-link d-flex justify-content-between align-items-center px-3">
            <span class="d-flex align-items-center">
              <span class="list-content-icon d-flex justify-content-center align-items-center me-2" style="width: 24px; height: 24px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader-pinwheel-icon lucide-loader-pinwheel"><path d="M22 12a1 1 0 0 1-10 0 1 1 0 0 0-10 0"/><path d="M7 20.7a1 1 0 1 1 5-8.7 1 1 0 1 0 5-8.6"/><path d="M7 3.3a1 1 0 1 1 5 8.6 1 1 0 1 0 5 8.6"/><circle cx="12" cy="12" r="10"/></svg>              </span>
              <span class="list-content-text">í•€ë³¼</span>
            </span>
            <span class="list-content-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 24 24" fill="none" stroke="#7282A6" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-right-icon lucide-chevron-right"><path d="m9 18 6-6-6-6"/></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
    <div class="reservation container-fluid px-4 mt-5">
            <!-- NEW! í•„í„° ë° ì°¨íŠ¸ ì˜ì—­ -->
      <div class="filter-wrapper mt-5 mb-4">
        <h2 class="mb-3">ğŸ“Š í•„í„°ë§ ë°ì´í„° ì¶”ì¶œ</h2>
        <div class="filter-section mb-3">
          <div class="row g-3 align-items-end">
            <!-- ë‚ ì§œ ë²”ìœ„ ì„ íƒ -->
            <div class="col-md-2">
              <label for="startDate" class="form-label"><b>ì‹œì‘ì¼</b></label>
              <input type="date" id="startDate" class="form-control">
            </div>
            <div class="col-md-2">
              <label for="endDate" class="form-label"><b>ì¢…ë£Œì¼</b></label>
              <input type="date" id="endDate" class="form-control">
            </div>
            <!-- ì¢…ë¥˜ ì„ íƒ ë²„íŠ¼ (ì…ê¸ˆ/ì¶œê¸ˆ) -->
            <div class="col-md-2 w-auto">
              <label class="form-label d-block"><b>ì…/ì¶œê¸ˆ</b></label>
              <div id="type-buttons-container" class="d-flex flex-wrap gap-2">
                  <button class="btn type-btn active" data-type="ì¶œê¸ˆ">ì¶œê¸ˆ</button>
                  <button class="btn type-btn" data-type="ì…ê¸ˆ">ì…ê¸ˆ</button>
              </div>
            </div>
            <!-- ë©”ëª¨ ì¸í’‹ -->
            <div class="memo-filter-wrapper col-md-4">
              <label for="memo-search-input" class="form-label"><strong>ğŸ“ ë©”ëª¨ ë‚´ìš©ì„ í¬í•¨í•˜ëŠ” í•­ëª© ê²€ìƒ‰</strong></label>
              <input type="text" id="memo-search-input" class="form-control" placeholder="ê²€ìƒ‰í•  ë©”ëª¨ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...">
            </div>
          </div>
          <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ ë²„íŠ¼ -->
          <div class="mt-3">
            <label class="form-label d-block"><b>ì¹´í…Œê³ ë¦¬ (ì¤‘ë³µ ì„ íƒ ê°€ëŠ¥)</b></label>
            <div id="category-buttons-container" class="d-flex flex-wrap gap-2">
              <!-- JSë¡œ ë²„íŠ¼ ë™ì  ìƒì„± -->
            </div>
          </div>
                    <!-- ì¡°íšŒ ë²„íŠ¼ -->
          <div class="col-md-3 mt-3">
            <button id="filter-btn" class="btn btn-search w-100">ì¡°íšŒí•˜ê¸°</button>
          </div>
        </div>
        
        <!-- ì°¨íŠ¸ê°€ ê·¸ë ¤ì§ˆ ì˜ì—­ -->
        <div id="chart-container">
          <canvas id="category-chart"></canvas>
        </div>
      </div>
      <div class="table-wrapper d-flex flex-column mt-5 mb-3">
        <h2 class="mb-3 mb-md-3">ğŸ’³ì¹´ë“œ ê²°ì œ ë‚´ì—­</h2>
        <div class="p-3 mb-3 border rounded bg-light">
          <div class="row g-3">
            <!-- ë‚ ì§œ í•„í„° -->
            <div class="col-md-2">
              <label for="table-start-date" class="form-label"><strong>ì‹œì‘ì¼</strong></label>
              <input type="date" id="table-start-date" class="form-control">
            </div>
            <div class="col-md-2">
              <label for="table-end-date" class="form-label"><strong>ì¢…ë£Œì¼</strong></label>
              <input type="date" id="table-end-date" class="form-control">
            </div>
            <!-- ì¹´í…Œê³ ë¦¬ í•„í„° -->
            <div class="mb-3 col-md-2">
              <label for="table-category-filter" class="form-label"><strong>ì¹´í…Œê³ ë¦¬</strong></label>
              <select id="table-category-filter" class="form-select">
                <option value="all">-- ì „ì²´ ë³´ê¸° --</option>
                <!-- ì¹´í…Œê³ ë¦¬ëŠ” JavaScriptë¡œ ì±„ì›Œì§‘ë‹ˆë‹¤ -->
              </select>
            </div>
                <!-- ì¢…ë¥˜ í•„í„° -->
            <div class="col-md-2">
              <label for="table-type-filter" class="form-label"><strong>ì¢…ë¥˜</strong></label>
              <select id="table-type-filter" class="form-select">
                <option value="all">-- ì „ì²´ --</option>
                <option value="ì¶œê¸ˆ">ì¶œê¸ˆ</option>
                <option value="ì…ê¸ˆ">ì…ê¸ˆ</option>
              </select>
            </div>
            <div class="col-md-4">
              <label for="table-memo-search" class="form-label"><strong>ë©”ëª¨ ê²€ìƒ‰</strong></label>
              <input type="text" id="table-memo-search" class="form-control" placeholder="ë©”ëª¨ ë‚´ìš© ê²€ìƒ‰...">
            </div>
          </div>
        </div>
        
        <div class="table-responsive">
          <table id="log-table" class="log-table table table-borderless table-hover align-middle text-center table-striped-custom">
            <thead class="table-dark">
              <tr>
                <th>ì‹œê°„</th>
                <th>ì¹´í…Œê³ ë¦¬</th>
                <th>ê¸ˆì•¡</th>
                <th>ì¹´ë“œ</th>
                <th>ì¢…ë¥˜</th>
                <th>ì”ì•¡</th>
                <th>ê²°ì œì²˜</th>
                <th>ë©”ëª¨</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script>
    // âœ… ë³€ìˆ˜ëª… ì´ë¦„ ì¶©ëŒ ë°©ì§€
    const supa = window.supabase.createClient(
      'https://wqxmvqqkbxiykiotbusd.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndxeG12cXFrYnhpeWtpb3RidXNkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg0NDcyOTYsImV4cCI6MjA2NDAyMzI5Nn0.RmB92YtjLPMx4tkQibuRVT_T4DL3_O8Pny3ZA9DU0tk'
    );

    const categories = ['ê´‘ê³ ', 'ì¥ì†Œ ëŒ€ê´€', 'ì•ˆì£¼/ì£¼ë¥˜', 'ë¹„í’ˆ', 'ì—…ë¬´ì¶”ì§„ë¹„', 'ê³µê³¼ê¸ˆ', 'íŒŒí‹°ë¹„', 'í˜„ì¥íŒë§¤', 'ëŒ€ê´€', 'ê¸°íƒ€'];

    //=======================================================
    // ì°¨íŠ¸ ë° í•„í„°ë§ ê´€ë ¨ ë¡œì§
    //=======================================================
    const typeButtonsContainer = document.getElementById('type-buttons-container');
    const categoryButtonsContainer = document.getElementById('category-buttons-container');
    const filterBtn = document.getElementById('filter-btn');
    const startDateInput = document.getElementById('startDate');
    const endDateInput = document.getElementById('endDate');
    let categoryChart = null; 
    const memoSearchInput = document.getElementById('memo-search-input');
    const tableStartDate = document.getElementById('table-start-date');
    const tableEndDate = document.getElementById('table-end-date');
    const tableTypeFilter = document.getElementById('table-type-filter');
    const tableCategoryFilter = document.getElementById('table-category-filter');
    const tableMemoSearch = document.getElementById('table-memo-search');

    function formatDateForInput(input) {
      // 1. ì…ë ¥ê°’ì´ ì—†ëŠ” ê²½ìš°, ì—ëŸ¬ ë°©ì§€ë¥¼ ìœ„í•´ ë¹ˆ ë¬¸ìì—´ ë°˜í™˜
      if (!input) return '';

      // 2. ì…ë ¥ê°’ì´ Date ê°ì²´ì¸ ê²½ìš° (setDefaultDateRangeì—ì„œ í˜¸ì¶œë  ë•Œ)
      if (input instanceof Date) {
        // toISOString()ì„ ì‚¬ìš©í•˜ë©´ 'YYYY-MM-DDTHH:...' í˜•ì‹ì´ ë˜ë¯€ë¡œ,
        // ì• 10ìë¦¬ë¥¼ ì˜ë¼ 'YYYY-MM-DD'ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤. ì´ ë°©ë²•ì´ ê°€ì¥ ì•ˆì „í•©ë‹ˆë‹¤.
        return input.toISOString().slice(0, 10);
      }

      // 3. ì…ë ¥ê°’ì´ ë¬¸ìì—´ì¸ ê²½ìš° (applyTableFiltersì—ì„œ í˜¸ì¶œë  ë•Œ)
      if (typeof input === 'string' && input.length >= 10) {
        // ë¬¸ìì—´ì˜ ì• 10ìë¦¬ë¥¼ ì˜ë¼ 'YYYY-MM-DD'ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
        return input.substring(0, 10);
      }
      
      // 4. ê·¸ ì™¸ì˜ ëª¨ë“  ì˜ˆì™¸ì ì¸ ê²½ìš°
      return '';
    }

    // [ì‹ ê·œ] ê¸°ë³¸ ë‚ ì§œ ë²”ìœ„(ì˜¤ëŠ˜ ~ 2ì£¼ ì „)ë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
    function setDefaultDateRange() {
      const today = new Date();
      const twoWeeksAgo = new Date();
      twoWeeksAgo.setDate(today.getDate() - 14);

      endDateInput.value = formatDateForInput(today);
      startDateInput.value = formatDateForInput(twoWeeksAgo);
    }

    function createCategoryButtons() {
      categories.forEach(cat => {
        const button = document.createElement('button');
        button.className = 'btn btn-category category-btn'; // Use secondary for non-active
        button.textContent = cat;
        button.dataset.category = cat;
        categoryButtonsContainer.appendChild(button);
      });
    }
    
    typeButtonsContainer.addEventListener('click', (e) => {
      if (e.target.classList.contains('type-btn')) {
        // í´ë¦­ëœ ë²„íŠ¼ì˜ active í´ë˜ìŠ¤ë¥¼ ë‹¨ìˆœíˆ í† ê¸€(toggle)ë§Œ í•©ë‹ˆë‹¤.
        e.target.classList.toggle('active');
      }
    });

    categoryButtonsContainer.addEventListener('click', (e) => {
      // ë²„íŠ¼ì´ 'category-btn' í´ë˜ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆëŠ”ì§€ í™•ì¸
      if (e.target.classList.contains('category-btn')) {
        // 'active' í´ë˜ìŠ¤ë¥¼ ë¶™ì˜€ë‹¤ ë–¼ëŠ”(í† ê¸€) ì—­í• ë§Œ ìˆ˜í–‰
        e.target.classList.toggle('active');
      }
    });

    filterBtn.addEventListener('click', async () => {
        const startDateValue = startDateInput.value; // ì˜ˆ: "2025-07-19"
        const endDateValue = endDateInput.value;   // ì˜ˆ: "2025-07-20"

        if (!startDateValue || !endDateValue) {
            alert('ì‹œì‘ì¼ê³¼ ì¢…ë£Œì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }

        // [âœ… ì´ë ‡ê²Œ ìˆ˜ì •ë©ë‹ˆë‹¤]
        // new Date()ì™€ .toISOString()ì„ ëª¨ë‘ ì œê±°í•©ë‹ˆë‹¤.
        // ì‚¬ìš©ìê°€ ì„ íƒí•œ ë‚ ì§œ ë¬¸ìì—´ì— ì‹œê°„ ì •ë³´ë§Œ ë¶™ì—¬ì„œ DBë¡œ ë³´ë‚¼ ë¬¸ìì—´ì„ ë§Œë“­ë‹ˆë‹¤.
        // ì´ë ‡ê²Œ í•˜ë©´ ì‹œê°„ëŒ€ ë³€í™˜ì´ ì „í˜€ ì¼ì–´ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        const startDateForDB = `${startDateValue} 00:00:00`;
        const endDateForDB = `${endDateValue} 23:59:59`;

        console.log("ğŸ“Š ì°¨íŠ¸ í•„í„°ë§ ì¡°íšŒ ì‹œì‘ (ì‹œê°„ëŒ€ ë³€í™˜ ì—†ìŒ)", {
            "ì‚¬ìš©ì ì„ íƒ ì‹œì‘ì¼": startDateValue,
            "ì‚¬ìš©ì ì„ íƒ ì¢…ë£Œì¼": endDateValue,
            "DB ì¡°íšŒ ì‹œì‘ì¼ì‹œ": startDateForDB,
            "DB ì¡°íšŒ ì¢…ë£Œì¼ì‹œ": endDateForDB
        });

        const selectedChartTypes = Array.from(typeButtonsContainer.querySelectorAll('.type-btn.active')).map(btn => btn.dataset.type);
        const chartTypesToQuery = [...selectedChartTypes];
        if (selectedChartTypes.includes('ì¶œê¸ˆ') && !chartTypesToQuery.includes('ì¶œê¸ˆì·¨ì†Œ')) {
            chartTypesToQuery.push('ì¶œê¸ˆì·¨ì†Œ');
        }

        if (chartTypesToQuery.length === 0) {
            alert('í•˜ë‚˜ ì´ìƒì˜ ì¢…ë¥˜(ì…ê¸ˆ/ì¶œê¸ˆ)ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }

        const selectedChartCategories = Array.from(categoryButtonsContainer.querySelectorAll('.category-btn.active')).map(btn => btn.dataset.category);
        if (selectedChartCategories.length === 0) {
            alert('í•˜ë‚˜ ì´ìƒì˜ ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
            return;
        }

        const chartMemoText = memoSearchInput.value.trim();
        
        // ìƒì„±ëœ 'YYYY-MM-DD HH:mm:ss' í˜•ì‹ì˜ ë¬¸ìì—´ì„ ê·¸ëŒ€ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
        await fetchAndRenderChart(startDateForDB, endDateForDB, selectedChartCategories, chartTypesToQuery, chartMemoText);
    });

    function applyTableFilters() {
        const startDate = tableStartDate.value;
        const endDate = tableEndDate.value;
        const selectedType = tableTypeFilter.value;
        const selectedCategory = tableCategoryFilter.value;
        const searchText = tableMemoSearch.value.toLowerCase().trim();

        const tableRows = document.querySelectorAll('#log-table tbody tr');

        tableRows.forEach(row => {
            // 1. rowì— ì €ì¥ëœ UTC ì‹œê°„(ISO ë¬¸ìì—´)ì„ ê°€ì ¸ì˜¨ë‹¤.
            const rowTimelineUTC = row.dataset.timeline;
            if (!rowTimelineUTC) { // timeline ë°ì´í„°ê°€ ì—†ëŠ” rowëŠ” ë¬´ì‹œ
                row.style.display = 'none';
                return;
            }

            // 2. UTC ë¬¸ìì—´ë¡œ KST ê¸°ì¤€ì˜ Date ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
            const rowKSTDateStr = formatDateForInput(rowTimelineUTC);
            
            const rowType = row.querySelector('.type-select')?.value;
            const rowCategory = row.querySelector('.category-select')?.value;
            const memoText = (row.querySelector('.memo-input')?.value || '').toLowerCase();

            // í•„í„° ì¡°ê±´ ê²€ì‚¬
            const dateMatch = (!startDate || rowKSTDateStr >= startDate) && (!endDate || rowKSTDateStr <= endDate);
            
            let typeMatch = true;
            if (selectedType === 'ì¶œê¸ˆ') {
                typeMatch = (rowType === 'ì¶œê¸ˆ' || rowType === 'ì¶œê¸ˆì·¨ì†Œ');
            } else if (selectedType !== 'all') {
                typeMatch = (rowType === selectedType);
            }

            const categoryMatch = selectedCategory === 'all' || rowCategory === selectedCategory;
            const memoMatch = memoText.includes(searchText);

            // ìµœì¢…ì ìœ¼ë¡œ ë³´ì—¬ì¤„ì§€ ë§ì§€ ê²°ì •
            if (dateMatch && typeMatch && categoryMatch && memoMatch) {
                row.style.display = ''; // í…Œì´ë¸”ì˜ ê¸°ë³¸ tr display ì†ì„±ìœ¼ë¡œ ë³µì›
            } else {
                row.style.display = 'none';
            }
        });
    }
    
    async function fetchAndRenderChart(startDate, endDate, categories, typesToQuery, memoText) {
        // ë¶ˆí•„ìš”í•œ typesToFetch ê³„ì‚° ë¡œì§ì„ ì œê±°í•˜ê³  typesToQueryë¥¼ ì§ì ‘ ì‚¬ìš©í•©ë‹ˆë‹¤.
        let query = supa
            .from('card_logs')
            .select('category, amount, type')
            .in('type', typesToQuery)
            .gte('timeline', startDate)
            .lte('timeline', endDate)
            .in('category', categories);

        if (memoText) {
            query = query.ilike('memo', `%${memoText}%`);
        }

        const { data: chartData, error } = await query;

        if (error) {
            console.error('ì°¨íŠ¸ ë°ì´í„° ì¡°íšŒ ì˜¤ë¥˜:', error);
            alert('ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            return;
        }

        const categoryTotals = {};
        categories.forEach(cat => categoryTotals[cat] = 0);
        chartData.forEach(item => {
            if (categoryTotals.hasOwnProperty(item.category)) {
                if (item.type === 'ì¶œê¸ˆì·¨ì†Œ') {
                    categoryTotals[item.category] -= item.amount;
                } else {
                    categoryTotals[item.category] += item.amount;
                }
            }
        });

        // ì°¨íŠ¸ ì œëª©ì„ ìœ„í•œ ë¡œì§
        const originalSelectedTypes = typesToQuery.filter(t => t !== 'ì¶œê¸ˆì·¨ì†Œ');
        const chartTypeTitle = originalSelectedTypes.join(' & ');
        renderBarChart(categoryTotals, chartTypeTitle);
    }
    
    function renderBarChart(data, type) {
      const ctx = document.getElementById('category-chart').getContext('2d');
      const labels = Object.keys(data);
      const values = Object.values(data);
      
      if (categoryChart) {
        categoryChart.destroy();
      }

      const chartTitle = `ì„ íƒëœ ê¸°ê°„ ë° ì¹´í…Œê³ ë¦¬ë³„ ${type} í˜„í™©`;
      const datasetLabel = `ì¹´í…Œê³ ë¦¬ë³„ ì´ ${type} ê¸ˆì•¡ (ì›)`;

      const chartColor = type === 'ì…ê¸ˆ' ? 'rgba(75, 192, 192, 0.6)' : 'rgba(255, 99, 132, 0.6)';
      const chartBorderColor = type === 'ì…ê¸ˆ' ? 'rgba(75, 192, 192, 1)' : 'rgba(255, 99, 132, 1)';
      
      categoryChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: labels,
          datasets: [{
            label: datasetLabel,
            data: values,
            backgroundColor: chartColor,
            borderColor: chartBorderColor,
            borderWidth: 1,
            maxBarThickness: 100
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            title: {
              display: true,
              text: chartTitle,
              font: {
                size: 16
              }
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  let label = context.dataset.label || '';
                  if (label) {
                    label += ': ';
                  }
                  if (context.parsed.y !== null) {
                    label += new Intl.NumberFormat('ko-KR').format(context.parsed.y) + ' ì›';
                  }
                  return label;
                }
              }
            },
            legend: {
          // ë²”ë¡€ë¥¼ í´ë¦­í–ˆì„ ë•Œì˜ ê¸°ë³¸ ë™ì‘(ë°ì´í„° ìˆ¨ê¸°ê¸°)ì„ ë¹„í™œì„±í™”í•©ë‹ˆë‹¤.
              onClick: null 
            }
          },
          scales: {
            x: {
              ticks: {
                // ê° ë¼ë²¨ì„ ì–´ë–»ê²Œ ê·¸ë¦´ì§€ ì •ì˜í•˜ëŠ” ì½œë°±í•¨ìˆ˜
                callback: function(value, index, ticks) {
                  const categoryName = labels[index]; // í˜„ì¬ ì¸ë±ìŠ¤ì˜ ì¹´í…Œê³ ë¦¬ëª…
                  const categoryValue = values[index]; // í˜„ì¬ ì¸ë±ìŠ¤ì˜ ê¸ˆì•¡
                  
                  // ê¸ˆì•¡ì´ 0ì´ ì•„ë‹ˆë©´ í¬ë§·íŒ…, 0ì´ë©´ ë¹ˆ ë¬¸ìì—´
                  const formattedValue = categoryValue !== 0 
                    ? new Intl.NumberFormat('ko-KR').format(categoryValue)
                    : '';

                  // ë°°ì—´ë¡œ ë°˜í™˜í•˜ë©´ ìë™ìœ¼ë¡œ ì—¬ëŸ¬ ì¤„ ë¼ë²¨ì´ ë©ë‹ˆë‹¤.
                  return [categoryName, formattedValue];
                },
                font: {
                  size: 12 // í°íŠ¸ í¬ê¸° ì¡°ì ˆ
                }
              }
            },
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value, index, values) {
                  return new Intl.NumberFormat('ko-KR').format(value);
                },
              grace: '5%'
              }
            }
          }
        }
      });
      // [ì‹ ê·œ] ì°¨íŠ¸ê°€ ì„±ê³µì ìœ¼ë¡œ ê·¸ë ¤ì§„ í›„, ìˆ¨ê²¨ì§„ ì»¨í…Œì´ë„ˆë¥¼ ë³´ì´ê²Œ ë§Œë“­ë‹ˆë‹¤.
      document.getElementById('chart-container').style.display = 'block';
    }

    // [ìˆ˜ì •] ëª¨ë“  í•„í„° ì´ë²¤íŠ¸ê°€ í†µí•© í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë„ë¡ ì—°ê²°
    tableStartDate.addEventListener('change', applyTableFilters);
    tableEndDate.addEventListener('change', applyTableFilters);
    tableTypeFilter.addEventListener('change', applyTableFilters); // ìƒˆë¡œ ì¶”ê°€ëœ ë“œë¡­ë‹¤ìš´ì˜ ì´ë²¤íŠ¸
    tableCategoryFilter.addEventListener('change', applyTableFilters);
    tableMemoSearch.addEventListener('input', applyTableFilters);

    //=======================================================
    // ê¸°ì¡´ í…Œì´ë¸” ê´€ë ¨ ë¡œì§
    //=======================================================
    async function loadInitialLogs() {
      const { data, error } = await supa
        .from('card_logs')
        .select('*')
        .order('timeline', { ascending: true });

      if (error) {
        console.error('ì´ˆê¸° ë¡œë“œ ì˜¤ë¥˜:', error);
        return;
      }

      const tbody = document.querySelector('#log-table tbody');
      tbody.innerHTML = '';

      data.forEach(row => { // reverse()ë¥¼ ì œê±°í•˜ê³  forEachë¡œ ë³€ê²½
        appendRow(row);     // appendRowëŠ” ì´ì œ prependë¡œ ë™ì‘í•˜ë¯€ë¡œ ìˆœì„œê°€ ë§ìŒ
      });
      
      // ëª¨ë“  ë°ì´í„°ë¥¼ DOMì— ì¶”ê°€í•œ í›„, ë§ˆì§€ë§‰ì— í•„í„°ë¥¼ í•œë²ˆ ì „ì²´ ì ìš©
      applyTableFilters(); 
    }

    function formatNumber(num) {
      return typeof num === 'number' ? num.toLocaleString('ko-KR') : '';
    } 

    function formatDateCompact(dateString) {
      if (!dateString || dateString.length < 16) return '';

      // "2025-07-19T18:54:00+00:00" í˜•íƒœì˜ ë¬¸ìì—´ì„ ê°€ì •
      const month = dateString.substring(5, 7);
      const day = dateString.substring(8, 10);
      const hour = dateString.substring(11, 13);
      const minute = dateString.substring(14, 16);

      return `${month}/${day} ${hour}:${minute}`;
    }


    function appendRow(row) {
        const tbody = document.querySelector('#log-table tbody');
        const tr = document.createElement('tr');
        // KST/UTC í˜¼ë™ì„ ë§‰ê¸° ìœ„í•´ ê¸°ì¤€ì´ ë˜ëŠ” UTC ì‹œê°„ì„ data ì†ì„±ì— ì €ì¥
        tr.dataset.timeline = row.timeline;

        const categoryOptions = categories.map(cat =>
            `<option value="${cat}" ${row.category === cat ? 'selected' : ''}>${cat}</option>`
        ).join('');
        const typeOptions = ['ì¶œê¸ˆ', 'ì…ê¸ˆ', 'ì¶œê¸ˆì·¨ì†Œ', 'ê¸°íƒ€'].map(type =>
            `<option value="${type}" ${row.type === type ? 'selected' : ''}>${type}</option>`
        ).join('');

        let typeClass = '';
        if (row.type === 'ì…ê¸ˆ') typeClass = 'deposit';
        else if (row.type === 'ì¶œê¸ˆ') typeClass = 'withdrawal';
        else if (row.type === 'ì¶œê¸ˆì·¨ì†Œ') typeClass = 'cancel';
        else typeClass = 'other';

        tr.innerHTML = `
            <td>${formatDateCompact(row.timeline)}</td>
            <td>
                <select class="form-select form-select-sm category-select" data-id="${row.id}" onchange="updateCategory(this)">
                    <option value="" disabled>ì„ íƒ</option>
                    ${categoryOptions}
                </select>
            </td>
            <td>${row.amount.toLocaleString('ko-KR')}</td>
            <td>${row.card}</td>
            <td>  
                <select class="form-select form-select-sm type-select ${typeClass}" data-id="${row.id}" onchange="updateType(this)">
                    <option value="" disabled>ì„ íƒ</option>
                    ${typeOptions}
                </select>
            </td>
            <td>${row.balance.toLocaleString('ko-KR')}</td>
            <td>${row.store}</td>
            <td>
                <input type="text" class="form-control form-control-sm memo-input" value="${row.memo || ''}" 
                    data-id="${row.id}" onblur="updateMemo(this)" />
            </td>
        `;

        // ìƒˆë¡œìš´ í–‰ì„ í…Œì´ë¸”ì˜ ê°€ì¥ ìœ„ìª½ì— ì¶”ê°€
        tbody.prepend(tr);
    }


    async function updateCategory(selectEl) {
      const newCategory = selectEl.value;
      const id = selectEl.getAttribute('data-id');

      const { error } = await supa
        .from('card_logs')
        .update({ category: newCategory })
        .eq('id', id);

      if (error) {
        alert('ì¹´í…Œê³ ë¦¬ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
        console.error(error);
      } else {
        console.log(`âœ… ì¹´í…Œê³ ë¦¬ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${newCategory}`);
      }
    }

    async function updateType(selectEl) {
      const newType = selectEl.value;
      const id = selectEl.getAttribute('data-id');

      const { error } = await supa
        .from('card_logs')
        .update({ type: newType })
        .eq('id', id);

      if (error) {
        alert('ì¢…ë¥˜ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
        console.error(error);
      } else {
        console.log(`âœ… ì¢…ë¥˜ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${newType}`);
      }
    }

    async function updateMemo(inputEl) {
      const newMemo = inputEl.value;
      const id = inputEl.getAttribute('data-id');

      const { error } = await supa
        .from('card_logs')
        .update({ memo: newMemo })
        .eq('id', id);

      if (error) {
        alert('ë©”ëª¨ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨');
        console.error(error);
      } else {
        console.log(`âœ… ë©”ëª¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ: ${newMemo}`);
      }
    }

    function populateTableFilter() {
      categories.forEach(cat => {
        const option = document.createElement('option');
        option.value = cat;
        option.textContent = cat;
        tableCategoryFilter.appendChild(option);
      });
    }

    // âœ… ìµœì´ˆ ì „ì²´ ë¡œë”©
    setDefaultDateRange();
    createCategoryButtons();
    populateTableFilter();
    loadInitialLogs();

    // âœ… ì‹¤ì‹œê°„ ì‚½ì…ë§Œ ê°ì§€
    supa
      .channel('realtime:card_logs')
      .on(
        'postgres_changes',
        { event: 'INSERT', schema: 'public', table: 'card_logs' },
        payload => {
          console.log('ğŸ†• ìƒˆ ë°ì´í„° ê°ì§€ë¨:', payload.new);
          appendRow(payload.new); 
        }
      )
      .subscribe();
  </script>
  <script src="/common/sidebar.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

</body>
</html>
