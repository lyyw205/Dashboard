<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ğŸ“‘ PPT ì»¨íŠ¸ë¡¤ëŸ¬</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="../common/sidebar.css">
</head>
<body>
  <div class="ppt-main">
    <!-- ì‚¬ì´ë“œë°” -->
    <div class="sidebar">
      <div class="sidebar-head">
        <button id="sidebar-toggle">
          <img class="hamburger-icon" src="../assets/hamburger.png">
        </button>
        <a href="../01main/index.html" class="sidebar-head-logo">
          <img class="sidebar-head-loge-img" src="../assets/logo.png">
        </a>
      </div>
      <ul>
        <li class="list-category">
          <span class="list-category-text">MANAGE</span>
        </li>
        <li class="list">
          <a href="../02applylist/applylist.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/form.png" class="form-icon">
              </span>
              <span class="list-content-text">íŒŒí‹°ì‹ ì²­ì„œ</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../03reservationlist/reservationlist.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/reservationsheet.png" class="form-icon">
              </span>
              <span class="list-content-text">ì˜ˆì•½ì‹œíŠ¸</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../05cardlogs/index.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/creditcard.png" class="form-icon">
              </span>
              <span class="list-content-text">ì¬ë¬´ê¸°ë¡</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../04calendar/calender.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/calendar.png" class="form-icon">
              </span>
              <span class="list-content-text">ìº˜ë¦°ë”</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list-category">
          <span class="list-category-text">GAMES</span>
        </li>
        <li class="list">
          <a href="../07ppt/controller.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/ppt.png" class="form-icon">
              </span>
              <span class="list-content-text">ì§„í–‰PPT</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
                <li class="list">
          <a href="#overview" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/music.png" class="form-icon">
              </span>
              <span class="list-content-text">ë…¸ë˜ì´ˆì„±</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../06quizppt/index.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/person.png" class="form-icon">
              </span>
              <span class="list-content-text">ì¸ë¬¼ê²Œì„</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
      </ul>
    </div>


    <div class="ppt-slide">
      <div class="ppt-controller">
        <h2>ğŸ“‘ PPT ìŠ¬ë¼ì´ë“œ ì»¨íŠ¸ë¡¤ëŸ¬</h2>

        <div class="controller">
          <div class="joystick" style="width: 100%">
            <button class="btn-gamestart" onclick="startPPT()">PPT ì‹œì‘í•˜ê¸°</button>
          </div>
        </div>

        <div id="all-sets"></div>
      </div>
    </div>
  </div>
  <script>
    let displayWindow = null;

    function startPPT() {
      displayWindow = window.open("display.html", "display", "width=1000,height=700");
    }

    function sendImage(path) {
      if (!displayWindow) {
        alert("ë¨¼ì € 'PPT ì‹œì‘í•˜ê¸°'ë¥¼ ëˆŒëŸ¬ ì°¸ê°€ì í™”ë©´ì„ ì—¬ì„¸ìš”.");
        return;
      }
      displayWindow.postMessage({ type: "slide", src: path }, "*");
    }

    function makeSlideItem(src, labelText) {
      const li = document.createElement("li");

      const img = document.createElement("img");
      img.src = src;

      const label = document.createElement("div");
      label.textContent = labelText;

      li.appendChild(img);
      li.appendChild(label);
      li.onclick = () => sendImage(src);
      return li;
    }

  function enhanceGroupTitles() {
    const groupTitles = document.querySelectorAll('.group-title');

    groupTitles.forEach(title => {
      // ê¸°ì¡´ì— ì•„ì´ì½˜ì´ ì—†ìœ¼ë©´ ì´ë¯¸ì§€ ì‚½ì…
      if (!title.querySelector('.arrow-icon')) {
        const arrow = document.createElement('img');
        arrow.src = '../assets/arrow-right2.png';
        arrow.alt = 'í™”ì‚´í‘œ';
        arrow.className = 'arrow-icon';
        title.prepend(arrow);
      }
    });
  }

    // ê¸°ì¡´ fetch ì½”ë“œ ë‚´ë¶€ì— enhanceGroupTitles() ì‹¤í–‰ ì¶”ê°€
    fetch("slides.json")
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("all-sets");

        Object.entries(data).forEach(([group, files]) => {
          const groupTitle = document.createElement("div");
          groupTitle.textContent = `ğŸ“‚ ${group}`;
          groupTitle.className = "group-title";
          container.appendChild(groupTitle);

          const ul = document.createElement("ul");
          ul.className = "slide-list";

          files.forEach(file => {
            const fullPath = `ppt-slides/${group}/${file}`;
            ul.appendChild(makeSlideItem(fullPath, file));
          });

          groupTitle.onclick = () => {
            const isOpen = ul.classList.toggle("open");
            groupTitle.classList.toggle("open", isOpen);
          };

          container.appendChild(ul);
        });

        // âœ… ëª¨ë“  group-titleì— í™”ì‚´í‘œ ì´ë¯¸ì§€ ë¶™ì´ê¸°
        enhanceGroupTitles();
      });

    document.getElementById('sidebar-toggle').addEventListener('click', function () {
      document.querySelector('.sidebar').classList.toggle('collapsed');
    });
  </script>
</body>
</html>
