<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ν€΄μ¦ μ»¨νΈλ΅¤λ¬</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="../common/sidebar.css" />
</head>
<body>
  <div class="person-game">
    <!-- μ‚¬μ΄λ“λ°” -->
    <div class="sidebar">
      <div class="sidebar-head">
        <button id="sidebar-toggle">
          <img class="hamburger-icon" src="../assets/hamburger.png">
        </button>
        <a href="../01main/index.html" class="sidebar-head-logo">
          <img class="sidebar-head-loge-img" src="../assets/logo.png">
        </a>
      </div>
      <ul>
        <li class="list-category">
          <span class="list-category-text">MANAGE</span>
        </li>
        <li class="list">
          <a href="../02applylist/applylist.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/form.png" class="form-icon">
              </span>
              <span class="list-content-text">νν‹°μ‹ μ²­μ„</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../03reservationlist/reservationlist.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/reservationsheet.png" class="form-icon">
              </span>
              <span class="list-content-text">μμ•½μ‹νΈ</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../05cardlogs/index.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/creditcard.png" class="form-icon">
              </span>
              <span class="list-content-text">μ¬λ¬΄κΈ°λ΅</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../04calendar/calender.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/calendar.png" class="form-icon">
              </span>
              <span class="list-content-text">μΊλ¦°λ”</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../09party-cards-data/party_cards.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/calendar.png" class="form-icon">
              </span>
              <span class="list-content-text">νν‹°μΉ΄λ“ λ°μ΄ν„°</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../10accounts/accounts.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/calendar.png" class="form-icon">
              </span>
              <span class="list-content-text">κ²λ¦΄λΌ κ³„μ •</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list-category">
          <span class="list-category-text">GAMES</span>
        </li>
        <li class="list">
          <a href="../07ppt/controller.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/ppt.png" class="form-icon">
              </span>
              <span class="list-content-text">μ§„ν–‰PPT</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
                <li class="list">
          <a href="/11stickgame/controller.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/stick.png" class="form-icon">
              </span>
              <span class="list-content-text">λ§‰λ€κ²μ„</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
        <li class="list">
          <a href="../06quizppt/index.html" class="list-content">
            <span class="list-content-leftwrap">
              <span class="list-content-icon">
                <img src="../assets/person.png" class="form-icon">
              </span>
              <span class="list-content-text">μΈλ¬Όκ²μ„</span>
            </span>
            <span class="list-content-arrow">
              <img src="../assets/arrow-right.png" class="arrow-right-icon">
            </span>
          </a>
        </li>
      </ul>
    </div>
  <div class="person-game-content"> 
    <h2>π® ν€΄μ¦ μ»¨νΈλ΅¤λ¬</h2>
    <div class="controler">
      <div class="quiz-count">
        <label class="quiz-count-text" for="count">μ¶μ ν•  λ¬Έμ  μ</label>
        <input class="quiz-count-input" type="number" id="count" value="5" min="1" max="20" />
      </div>
      <div class="joystick">
        <button class="btn-gamestart" onclick="startGame()">κ²μ„ μ‹μ‘</button>
        <div class="btn-prev-next">
          <button class="btn-prev" onclick="send('prev')">μ΄μ „</button>
          <button class="btn-next" onclick="send('next')">λ‹¤μ</button>
        </div>
      </div>
    </div>
    
    <div id="set-list">
      <strong class="all-set-list-header">π― μ„ νƒλ ν€΄μ¦ μ„ΈνΈ:</strong>
      <ul id="selected-sets"></ul>
    </div>

    <div id="all-set-list">
      <strong class="all-set-list-header">π“ μ „μ²΄ ν€΄μ¦ μ„ΈνΈ:</strong>
      <ul id="all-sets"></ul>
    </div>
  </div> 

  <script>
    const quizSets = ['κΉ€μ—°μ•„', 'κΉ€ν’', 'λ΅λ‹¤μ£Ό', 'λ°•λ…μ', 'λ°•μ •λ―Ό', 'μ†μ„κµ¬', 'μμ§€', 'μ΄μ ν›', 'μΌλ΅ λ¨Έμ¤ν¬', 'μ§€μμ€', 'μΉ¨μ°©λ§¨', 'μΉ΄λ”κ°€λ“ ', 'μ‹ λ―Όμ•„', 'κµ¬κµν™'];
    let selected = [];
    let displayWindow = null;

    function startGame() {
      const count = parseInt(document.getElementById("count").value) || 5;

      selected = quizSets
        .sort(() => Math.random() - 0.5)
        .slice(0, count);

      localStorage.setItem("selectedSets", JSON.stringify(selected));
      console.log("π― μ„ νƒλ μ„ΈνΈ:", selected);

      const selectedListEl = document.getElementById("selected-sets");
      selectedListEl.innerHTML = "";
      selected.forEach(name => {
        const li = document.createElement("li");
        li.textContent = name;
        selectedListEl.appendChild(li);
      });

      renderAllSets(); // π§  μ„ νƒ κ°•μ΅° μ¬λ°μ
      // μ°Έκ°€μ ν™”λ©΄ λ„μ°κΈ°
      displayWindow = window.open("quiz-display.html", "quiz-display", "width=800,height=600");
    }

    function send(action) {
      if (displayWindow) {
        displayWindow.postMessage({ action }, "*");
      } else {
        alert("λ¨Όμ € 'κ²μ„ μ‹μ‘'μ„ λλ¬ μ°Έκ°€μ ν™”λ©΄μ„ μ—¬μ„Έμ”.");
      }
    }

    // μ „μ²΄ μ„ΈνΈ λ©λ΅ λ λ”λ§
    function renderAllSets() {
      const allListEl = document.getElementById("all-sets");
      allListEl.innerHTML = "";

      quizSets
        .slice()  // μ›λ³Έ λ°°μ—΄ μ†μƒ λ°©μ§€
        .sort((a, b) => a.localeCompare(b, 'ko'))  // ν•κΈ€ μ •λ ¬
        .forEach(set => {
          const li = document.createElement("li");
          li.textContent = set;
          if (selected.includes(set)) {
            li.classList.add("selected");
          }
          li.onclick = () => {
            if (displayWindow) {
              displayWindow.postMessage({ action: "showSet", set }, "*");
            } else {
              alert("μ°Έκ°€μ ν™”λ©΄μ΄ μ—΄λ ¤ μμ§€ μ•μµλ‹λ‹¤.");
            }
          };
          allListEl.appendChild(li);
        });
    }

    // β… μ΄κΈ° μ „μ²΄ μ„ΈνΈ λ λ”λ§ (μ„ νƒ μ „μ—λ„ λ³΄μ—¬μ•Ό ν•λ―€λ΅)
    renderAllSets();

    document.getElementById('sidebar-toggle').addEventListener('click', function () {
      document.querySelector('.sidebar').classList.toggle('collapsed');
    });
  </script>
</body>
</html>
